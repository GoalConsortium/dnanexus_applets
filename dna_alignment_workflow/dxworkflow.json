{
  "name": "dna_alignment_workflow",
  "title": "dna_alignment_workflow",
  "version": "1.0.0",
  "summary": "DNA Alignment Pipeline",
  "outputFolder": "/Alignment_Output",
  "inputs": [
    {
      "name": "fq1",
      "class": "file"
    },
    {
      "name": "fq2",
      "class": "file",
      "optional": true
    },
    {
      "name": "Reference_File",
      "class": "file"
    },
    {
      "name": "pair_id",
      "class": "string"
    },
    {
      "name": "mdup",
      "class": "string"
    },
    {
      "name": "Concat_Reference_File",
      "class": "file"
    }
  ],
  "outputs": [
    {
      "name": "trimreport",
      "class": "file",
      "outputSource": {
        "$dnanexus_link": {
          "outputField": "trimreport",
          "stage": "Trim_Galore"
        }
      }
    },
    {
      "name": "umihist",
      "class": "file",
      "outputSource": {
        "$dnanexus_link": {
          "outputField": "umihist",
          "stage": "QC_BAM"
        }
      }
    },
    {
      "name": "dedupcov",
      "class": "file",
      "outputSource": {
        "$dnanexus_link": {
          "outputField": "dedupcov",
          "stage": "QC_BAM"
        }
      }
    },
    {
      "name": "covuniqhist",
      "class": "file",
      "outputSource": {
        "$dnanexus_link": {
          "outputField": "covuniqhist",
          "stage": "QC_BAM"
        }
      }
    },
    {
      "name": "finalbam",
      "class": "file",
      "outputSource": {
        "$dnanexus_link": {
          "outputField": "finalbam",
          "stage": "GATK"
        }
      }
    },
    {
      "name": "finalindex",
      "class": "file",
      "outputSource": {
        "$dnanexus_link": {
          "outputField": "finalindex",
          "stage": "GATK"
        }
      }
    },
    {
      "name": "seqstats",
      "class": "file",
      "outputSource": {
        "$dnanexus_link": {
          "outputField": "seqstats",
          "stage": "QC_Stats"
        }
      }
    }
  ],
  "stages": [
    {
      "id": "Trim_Galore",
      "executable": "applet-FfxVQKj982k2X5qf2pQvz0gP",
      "folder": "TrimGalore_Output",
      "input": {
        "fq1": {
          "$dnanexus_link": {
          "workflowInputField": "fq1"
          }
        },
        "fq2": {
          "$dnanexus_link": {
          "workflowInputField": "fq2"
          }
        },
        "pair_id": {
          "$dnanexus_link": {
            "workflowInputField": "pair_id"
          }
        }
      }
    },
    {
      "id": "Align_Markdups",
      "executable": "applet-Ff6Qg8j982kJ4jBf9pfF3b05",
      "folder": "AlignMarkdups_Output",
      "input": {
        "fq2": {
          "$dnanexus_link": {
            "outputField": "trim2",
            "stage": "Trim_Galore"
          }
        },
        "fq1": {
          "$dnanexus_link": {
            "outputField": "trim1",
            "stage": "Trim_Galore"
          }
        },
        "reference": {
          "$dnanexus_link": {
            "workflowInputField": "Reference_File"
          }
        },
        "mdup": {
          "$dnanexus_link": {
            "workflowInputField": "mdup"
          }
        },
        "pair_id": {
          "$dnanexus_link": {
            "workflowInputField": "pair_id"
          }
        }
      }
    },
    {
      "id": "QC_BAM",
      "executable": "applet-Ff6QgKj982kG098g9x6X8vqY",
      "folder": "QC_Output",
      "input": {
        "Consensus_BAM": {
          "$dnanexus_link": {
            "outputField": "uniqbam",
            "stage": "Align_Markdups"
          }
        },
        "reference_files": {
          "$dnanexus_link": {
            "workflowInputField": "Reference_File"
          }
        },
        "pair_id": {
          "$dnanexus_link": {
            "workflowInputField": "pair_id"
          }
        }
      }
    },
    {
      "id": "GATK",
      "executable": "applet-Fg2v1pj982kB4Jv87GQgx1J4",
      "folder": "GATK_Output",
      "input": {
        "Consensus_BAM": {
          "$dnanexus_link": {
            "outputField": "uniqbam",
            "stage": "Align_Markdups"
          }
        },
        "ref_file": {
          "$dnanexus_link": {
            "workflowInputField": "Reference_File"
          }
        },
        "pair_id": {
          "$dnanexus_link": {
            "workflowInputField": "pair_id"
          }
        }
      }
    },
    {
      "id": "QC_Stats",
      "executable": "applet-FgbP30Q9VpY9553Y7X8kXFpJ",
      "folder": "QC_Output",
      "input": {
        "consensus_bam": {
          "$dnanexus_link": {
            "outputField": "uniqbam",
            "stage": "Align_Markdups"
          }
        },
        "trimreport": {
          "$dnanexus_link": {
            "outputField": "trimreport",
            "stage": "Trim_Galore"
          }
        },
        "dedupcov": {
          "$dnanexus_link": {
            "outputField": "dedupcov",
            "stage": "QC_BAM"
          }
        },
        "ref_file": {
          "$dnanexus_link": {
            "workflowInputField": "Reference_File"
          }
        },
        "concat_ref_file": {
          "$dnanexus_link": {
            "workflowInputField": "Concat_Reference_File"
          }
        },
        "pair_id": {
          "$dnanexus_link": {
            "workflowInputField": "pair_id"
          }
        }
      }
    }
  ]
}
