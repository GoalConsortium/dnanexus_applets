{
  "name": "dna_alignment_workflow",
  "title": "dna_alignment_workflow",
  "version": "1.0.0",
  "summary": "DNA Alignment Pipeline",
  "outputFolder": "/Alignment_Output",
  "inputs": [
    {
      "name": "Reference_File",
      "class": "file"
    },
    {
      "name": "pair_id",
      "class": "string"
    }
  ],
  "outputs": [
    {
      "name": "trimreport",
      "class": "file",
      "outputSource": {
        "$dnanexus_link": {
          "outputField": "trimreport",
          "stage": "Trim_Galore"
        }
      }
    },
    {
      "name": "umihist",
      "class": "file",
      "outputSource": {
        "$dnanexus_link": {
          "outputField": "umihist",
          "stage": "QC_BAM"
        }
      }
    },
    {
      "name": "dedupcov",
      "class": "file",
      "outputSource": {
        "$dnanexus_link": {
          "outputField": "dedupcov",
          "stage": "QC_BAM"
        }
      }
    },
    {
      "name": "covuniqhist",
      "class": "file",
      "outputSource": {
        "$dnanexus_link": {
          "outputField": "covuniqhist",
          "stage": "QC_BAM"
        }
      }
    },
    {
      "name": "finalbam",
      "class": "file",
      "outputSource": {
        "$dnanexus_link": {
          "outputField": "finalbam",
          "stage": "GATK"
        }
      }
    }
  ],
  "stages": [
    {
      "id": "Trim_Galore",
      "executable": "applet-Ff6Qg58982kJ4jBf9pfF3b01",
      "folder": "TrimGalore_Output",
      "input": {
        "pair_id": {
          "$dnanexus_link": {
            "workflowInputField": "pair_id"
          }
        }
      }
    },
    {
      "id": "Align_Markdups",
      "executable": "applet-Ff6Qg8j982kJ4jBf9pfF3b05",
      "folder": "AlignMarkdups_Output",
      "input": {
        "fq2": {
          "$dnanexus_link": {
            "outputField": "trim2",
            "stage": "Trim_Galore"
          }
        },
        "fq1": {
          "$dnanexus_link": {
            "outputField": "trim1",
            "stage": "Trim_Galore"
          }
        },
        "reference": {
          "$dnanexus_link": {
            "workflowInputField": "Reference_File"
          }
        },
        "pair_id": {
          "$dnanexus_link": {
            "workflowInputField": "pair_id"
          }
        }
      }
    },
    {
      "id": "QC_BAM",
      "executable": "applet-Ff6QgKj982kG098g9x6X8vqY",
      "folder": "QC_Output",
      "input": {
        "Consensus_BAM": {
          "$dnanexus_link": {
            "outputField": "uniqbam",
            "stage": "Align_Markdups"
          }
        },
        "reference_files": {
          "$dnanexus_link": {
            "workflowInputField": "Reference_File"
          }
        },
        "pair_id": {
          "$dnanexus_link": {
            "workflowInputField": "pair_id"
          }
        }
      }
    },
    {
      "id": "GATK",
      "executable": "applet-Ff6QgF0982k24xj1Bv8jJjP0",
      "folder": "GATK_Output",
      "input": {
        "Consensus_BAM": {
          "$dnanexus_link": {
            "outputField": "uniqbam",
            "stage": "Align_Markdups"
          }
        },
        "ref_file": {
          "$dnanexus_link": {
            "workflowInputField": "Reference_File"
          }
        },
        "pair_id": {
          "$dnanexus_link": {
            "workflowInputField": "pair_id"
          }
        }
      }
    }
  ]
}
