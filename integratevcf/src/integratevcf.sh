#!/bin/bash
# Union_VCF 0.5.33
# Generated by dx-app-wizard.

main() {

    echo "Value of vcffiles: '${vcffiles[@]}'"
    echo "Value of pair_id: '$pair_id'"
    dx download "$genodict" -o genome.dict
    
    for i in ${!vcffiles[@]}
    do
        dx download "${vcffiles[$i]}" -o vcffiles-${i}.tar.gz
	tar xvf vcffiles-${i}.tar.gz
    done

    docker run -v ${PWD}:/data docker.io/goalconsortium/variantcalling:0.5.33 bash /seqprg/school/process_scripts/variants/union.sh -r ./ -p ${pair_id}
    union_vcf=$(dx upload ${pair_id}.union.vcf.gz --brief)
    dx-jobutil-add-output union_vcf "$union_vcf" --class=file
}
